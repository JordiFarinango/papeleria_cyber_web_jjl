{% load custom_filters %}
{% if productos %}
<table>
    <thead>
        <tr>
            <th>Foto</th>
            <th>Nombre</th>
            <th>Marca</th>
            <th>Precio</th>
            <th>Stock</th>
            <th>Acci√≥n</th>
        </tr>
    </thead>
    <tbody>
    {% for producto in productos %}
    <tr class="hover:bg-gray-50 transition text-sm">
        <!-- Foto clickeable -->
        <td class="px-2 py-2">
        {% if producto.foto %}
            <img
            src="{{ producto.foto.url }}"
            alt="Imagen de {{ producto.nombre }}"
            class="w-12 h-12 object-cover rounded cursor-zoom-in"
            data-lightbox
            data-full="{{ producto.foto.url }}" />
        {% else %}
            <span class="text-gray-400 italic">Sin imagen</span>
        {% endif %}
        </td>

        <!-- Nombre -->
        <td class="px-2 py-2 font-semibold text-gray-900 truncate max-w-[160px]" title="{{ producto.nombre }}">
        {{ producto.nombre }}
        </td>

        <!-- Marca -->
        <td class="px-2 py-2">{{ producto.marca.nombre }}</td>

        <!-- Precio -->
        <td class="px-2 py-2">${{ producto.precio }}</td>

        <!-- Stock -->
        <td class="px-2 py-2">{{ producto.stock }}</td>

        <!-- Acciones -->
        <td class="px-2 py-2">
        <button
            class="agregar-carrito bg-blue-600 text-white text-xs px-3 py-1 rounded-lg hover:bg-blue-700 transition"
            data-id="{{ producto.id }}"
            data-nombre="{{ producto.nombre }}"
            data-marca="{{ producto.marca.nombre }}"
            data-categoria="{{ producto.categoria.nombre }}"  
            data-precio="{{ producto.precio|decimal_point }}"
            data-stock="{{ producto.stock }}">
            Agregar
        </button>
        </td>
    </tr>
    {% endfor %}
    </tbody>

</table>
{% else %}
<p>No se encontraron productos.</p>
{% endif %}